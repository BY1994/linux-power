{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Linux Power Management Guide Document TBD TBD TBD","title":"\ud648"},{"location":"#welcome-to-linux-power-management-guide-document","text":"TBD","title":"Welcome to Linux Power Management Guide Document"},{"location":"#tbd","text":"TBD","title":"TBD"},{"location":"01_CPU/01_01_cpu_index/","text":"CPU \ubcf8 \ud398\uc774\uc9c0\ub294 CPU Management \uad00\ub828 \ubb38\uc11c\uc758 \ubaa9\ucc28 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4.","title":"CPU \ubaa9\ucc28"},{"location":"01_CPU/01_01_cpu_index/#cpu","text":"\ubcf8 \ud398\uc774\uc9c0\ub294 CPU Management \uad00\ub828 \ubb38\uc11c\uc758 \ubaa9\ucc28 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4.","title":"CPU"},{"location":"03_DVFS/03_01_dvfs_index/","text":"\ubcf8 \ud398\uc774\uc9c0\ub294 dvfs index \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4. Definition of Dynamic Voltage Frequency Scaling Linux CPUFreq Framework Linux CPUFreq Governor Linux CPUFreq sysfs command","title":"DVFS \ubaa9\ucc28"},{"location":"03_DVFS/03_02_dvfs_driver/","text":"DVFS Dynamic Voltage Frequency Scaling Dynamic Voltage Frequency Scaling is enabled by default, so the CPU frequency and voltages of a running system will adapt to the system's load. The DVFS subsystem is controlled through the /sys/devices/system/cpu/cpu*N*/cpufreq/ sysfs path, where N corresponds to the core number: https://www.digi.com/resources/documentation/digidocs/90001546/reference/bsp/v4-1_cc6/r_power_management.htm?TocPath=Digi%20Embedded%20Yocto%7CSystem%20development%7CLinux%20Board%20Support%20Package%7CDevices%20and%20interfaces%7C_____14 Dynamic frequency scaling\uc740 CPU throttling\uc774\ub77c\uace0\ub3c4 \ud569\ub2c8\ub2e4. [\ucd9c\ucc98] https://en.wikipedia.org/wiki/Dynamic_frequency_scaling Linux \uacf5\uc2dd \ubb38\uc11c\uc5d0 CPU Performance Scaling\uc740 Working-State Power Management\ub85c \ubd84\ub958\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4. Linux CPUFreq Framework Linux\uc5d0\uc11c CPU Performance Scaling\uc740 CPUFreq (CPU Frequency scaling) \ucf54\ub4dc\ub97c \ud1b5\ud574 \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4. CPUFreq\ub294 3\uac00\uc9c0 layer\ub85c \uc774\ub8e8\uc5b4\uc838\uc788\uc2b5\ub2c8\ub2e4. CPUFreq core: \ub2e4\ub978 component\ub4e4\uc774 \ub3d9\uc791\ud558\ub294 \uae30\ubcf8\uc801\uc778 framework \ubd80\ubd84\uc785\ub2c8\ub2e4. \uacf5\ud1b5\uc801\uc778 \uad6c\uc870\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. Scaling governor: CPU capacity\ub97c \ucd94\uc815\ud558\ub294\ub370 \uc0ac\uc6a9\ub418\ub294 \uc54c\uace0\ub9ac\uc998\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4. Scaling drivers: scaling governor\uc5d0\uac8c \uc694\uccad\ubc1b\uc740 CPU \uc0c1\ud0dc \ubcc0\uacbd\uc744 \uc704\ud558\uc5ec hardware \uc5d0 \uc811\uadfc\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4. Scaling governor performance: scaling_max_freq\ub098 scaling_min_freq \uc81c\ud55c\uc774 \ubcc0\uacbd\ub420 \ub54c\ub9cc governor\uac00 \uc124\uc815\ub418\uba70, \uac00\uc7a5 \ub192\uc740 frequency\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. powersave: \uc704\uc640 \ubc18\ub300\ub85c lowest frequency \ub85c \uc124\uc815\ub429\ub2c8\ub2e4. userspace: governor\uac00 \uc9c1\uc811 \ub3d9\uc791\ud558\uc9c0\ub294 \uc54a\uace0 user space\uc5d0\uc11c scaling_setspeed\ub97c \uc124\uc815\ud558\uba74 CPU frequency\uac00 \uc124\uc815\ub429\ub2c8\ub2e4. schedutil: CPU scheduler\ub97c \ud1b5\ud574\uc11c \uc5bb\uc740 CPU utilization \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. scheduling class \uc5d0 \ub530\ub77c frequency\ub97c \uc62c\ub9b4 \uac83\uc778\uc9c0 \ub0b4\ub9b4 \uac83\uc778\uc9c0\uac00 \uacb0\uc815\ub429\ub2c8\ub2e4. ondemand: CPU load \uac12\uc73c\ub85c CPU frequency\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4. CPU load\ub294 \uc804\uccb4 CPU time \uc911\uc5d0 active time (non-idle) \uc774\uc5c8\ub358 \ube44\uc728\ub85c \uacc4\uc0b0\ub429\ub2c8\ub2e4. CPU load\uac00 \uc62c\ub77c\uac00\uba74 Cpu frequency\ub97c \uc62c\ub9bd\ub2c8\ub2e4. CPU load\uac00 1\uc774\uba74 (100%) cpuinfo_max_freq \uac12\uc73c\ub85c \uc124\uc815\ub418\uace0, 0 \uc774\uba74 (0%) cpuinfo_min_freq \uac12\uc73c\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. \ub610\ud55c speedup threshold\ub97c \uc815\ud574\ub450\uba74, \uadf8\uac83\uc744 \ub118\uc73c\uba74 max cpu frequency\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. conservative: \uc774\uac83\ub3c4 ondemand governor \ucc98\ub7fc CPU load\ub97c \uacc4\uc0b0\ud569\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \uc774\uac83\uc740 threshold\ub97c \ub118\uc5c8\ub294\uc9c0 \uc548 \ub118\uc5c8\ub294\uc9c0\uc5d0 \ub530\ub77c \uc0c1\ub300\uc801\uc73c\ub85c \uc870\uae08\uc529 frequency\ub97c \ubcc0\ud654\uc2dc\ud0b5\ub2c8\ub2e4. [\ucd9c\ucc98] https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html sysfs command cpufreq \uad00\ub828 \uac00\ub2a5\ud55c sysfs \uc804\uccb4 # ls /sys/devices/system/cpu/cpu0/cpufreq/ affected_cpus related_cpus scaling_governor cpuinfo_cur_freq scaling_available_frequencies scaling_max_freq cpuinfo_max_freq scaling_available_governors scaling_min_freq cpuinfo_min_freq scaling_cur_freq scaling_setspeed cpuinfo_transition_latency scaling_driver stats currnet operating frequency \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_cur_freq 1150000 \uc124\uc815 \uac00\ub2a5\ud55c frequency \uac12\ub4e4 \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_available_frequencies 600000 900000 1150000 \uc124\uc815 \uac00\ub2a5\ud55c governor\ub4e4 \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_available_governors ondemand userspace interactive performance governor \uc120\ud0dd # echo userspace > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor [\ucd9c\ucc98] https://www.digi.com/resources/documentation/digidocs/90001546/reference/bsp/v4-1_cc6/r_power_management.htm?TocPath=Digi%20Embedded%20Yocto%7CSystem%20development%7CLinux%20Board%20Support%20Package%7CDevices%20and%20interfaces%7C_____14 [\ucd9c\ucc98] https://community.arm.com/developer/tools-software/oss-platforms/w/docs/528/cpufreq-dvfs Kernel Build \uc2dc Governor \uc120\ud0dd Default governor is \"performance\". The default governor can be changed through 'menuconfig'. Multiple governors can be built and exist in the kernel by selecting them through \"menuconfig\". Select the governors you want to build in to kernel. CPU Power management options ---> [*] CPU frequency scaling Default CPUFreq governor (performance) ---> [*] performance [*] userspace [*] ondemand [] conservative [\ucd9c\ucc98] DVFS (Dynamic Voltage and Frequency scaling) Disabler | \uc791\uc131\uc790 \uc5d0\ud504\ub7a8 EFRAM [\ucd9c\ucc98] https://wiki.somlabs.com/index.php/How_to_scale_CPU_frequency_with_DVFS_framework Voltage Scaling The voltage layer consists of the information of all voltage domains in the system and configures all vdds during voltage layer initialization. When a vdd is configured a regulator supply handle is acquired and stored in the corresponding vdd structure.The regulators scale/set voltage function is plugged in to the vdd's voltage scale function pointer. Thus when a voltage change is requested forwarded to a vdd. The voltage layer requests the regulator framework to change the device voltage to the target voltage. Regluator driver verifies if the target voltage is in with in the limits of the voltage domain and regulator supply constraints. If all the checks go through then regulator changes the voltage of the requested device to the target voltage. [\ucd9c\ucc98] DVFS (Dynamic Voltage and Frequency scaling) Disabler | \uc791\uc131\uc790 \uc5d0\ud504\ub7a8 EFRAM Note Linux \uacf5\uc2dd\ubb38\uc11c\uc5d0\uc11c \ub098\uc624\ub294 CPU\ub77c\ub294 \uc6a9\uc5b4\ub294 logical CPU\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. processor \ub77c\ub294 \uc6a9\uc5b4\ub97c \uc0ac\uc6a9\ud560 \ub54c\ub9cc logical CPU\ub4e4\uc744 \ud3ec\ud568\ud558\ub294 \ubb3c\ub9ac\uc801\uc778 \uc758\ubbf8\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. logical CPU\ub294 processor \uc548\uc5d0 core\ub97c \uc758\ubbf8\ud558\uac70\ub098 hardware thread\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. Note that the logical CPU may be a physical single-core processor, or a single core in a multicore processor, or a hardware thread in a physical processor or processor core. In what follows \u201cCPU\u201d always means \u201clogical CPU\u201d unless explicitly stated otherwise and the word \u201cprocessor\u201d is used to refer to the physical part possibly including multiple logical CPUs. [\ucd9c\ucc98] https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html cf) DEVFREQ cf) PM QoS https://events.static.linuxfound.org/images/stories/pdf/lcjp2012_ham.pdf","title":"DVFS framework"},{"location":"03_DVFS/03_02_dvfs_driver/#dvfs","text":"","title":"DVFS"},{"location":"03_DVFS/03_02_dvfs_driver/#dynamic-voltage-frequency-scaling","text":"Dynamic Voltage Frequency Scaling is enabled by default, so the CPU frequency and voltages of a running system will adapt to the system's load. The DVFS subsystem is controlled through the /sys/devices/system/cpu/cpu*N*/cpufreq/ sysfs path, where N corresponds to the core number: https://www.digi.com/resources/documentation/digidocs/90001546/reference/bsp/v4-1_cc6/r_power_management.htm?TocPath=Digi%20Embedded%20Yocto%7CSystem%20development%7CLinux%20Board%20Support%20Package%7CDevices%20and%20interfaces%7C_____14 Dynamic frequency scaling\uc740 CPU throttling\uc774\ub77c\uace0\ub3c4 \ud569\ub2c8\ub2e4. [\ucd9c\ucc98] https://en.wikipedia.org/wiki/Dynamic_frequency_scaling Linux \uacf5\uc2dd \ubb38\uc11c\uc5d0 CPU Performance Scaling\uc740 Working-State Power Management\ub85c \ubd84\ub958\ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4.","title":"Dynamic Voltage Frequency Scaling"},{"location":"03_DVFS/03_02_dvfs_driver/#linux-cpufreq-framework","text":"Linux\uc5d0\uc11c CPU Performance Scaling\uc740 CPUFreq (CPU Frequency scaling) \ucf54\ub4dc\ub97c \ud1b5\ud574 \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4. CPUFreq\ub294 3\uac00\uc9c0 layer\ub85c \uc774\ub8e8\uc5b4\uc838\uc788\uc2b5\ub2c8\ub2e4. CPUFreq core: \ub2e4\ub978 component\ub4e4\uc774 \ub3d9\uc791\ud558\ub294 \uae30\ubcf8\uc801\uc778 framework \ubd80\ubd84\uc785\ub2c8\ub2e4. \uacf5\ud1b5\uc801\uc778 \uad6c\uc870\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. Scaling governor: CPU capacity\ub97c \ucd94\uc815\ud558\ub294\ub370 \uc0ac\uc6a9\ub418\ub294 \uc54c\uace0\ub9ac\uc998\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4. Scaling drivers: scaling governor\uc5d0\uac8c \uc694\uccad\ubc1b\uc740 CPU \uc0c1\ud0dc \ubcc0\uacbd\uc744 \uc704\ud558\uc5ec hardware \uc5d0 \uc811\uadfc\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.","title":"Linux CPUFreq Framework"},{"location":"03_DVFS/03_02_dvfs_driver/#scaling-governor","text":"performance: scaling_max_freq\ub098 scaling_min_freq \uc81c\ud55c\uc774 \ubcc0\uacbd\ub420 \ub54c\ub9cc governor\uac00 \uc124\uc815\ub418\uba70, \uac00\uc7a5 \ub192\uc740 frequency\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. powersave: \uc704\uc640 \ubc18\ub300\ub85c lowest frequency \ub85c \uc124\uc815\ub429\ub2c8\ub2e4. userspace: governor\uac00 \uc9c1\uc811 \ub3d9\uc791\ud558\uc9c0\ub294 \uc54a\uace0 user space\uc5d0\uc11c scaling_setspeed\ub97c \uc124\uc815\ud558\uba74 CPU frequency\uac00 \uc124\uc815\ub429\ub2c8\ub2e4. schedutil: CPU scheduler\ub97c \ud1b5\ud574\uc11c \uc5bb\uc740 CPU utilization \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4. scheduling class \uc5d0 \ub530\ub77c frequency\ub97c \uc62c\ub9b4 \uac83\uc778\uc9c0 \ub0b4\ub9b4 \uac83\uc778\uc9c0\uac00 \uacb0\uc815\ub429\ub2c8\ub2e4. ondemand: CPU load \uac12\uc73c\ub85c CPU frequency\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4. CPU load\ub294 \uc804\uccb4 CPU time \uc911\uc5d0 active time (non-idle) \uc774\uc5c8\ub358 \ube44\uc728\ub85c \uacc4\uc0b0\ub429\ub2c8\ub2e4. CPU load\uac00 \uc62c\ub77c\uac00\uba74 Cpu frequency\ub97c \uc62c\ub9bd\ub2c8\ub2e4. CPU load\uac00 1\uc774\uba74 (100%) cpuinfo_max_freq \uac12\uc73c\ub85c \uc124\uc815\ub418\uace0, 0 \uc774\uba74 (0%) cpuinfo_min_freq \uac12\uc73c\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. \ub610\ud55c speedup threshold\ub97c \uc815\ud574\ub450\uba74, \uadf8\uac83\uc744 \ub118\uc73c\uba74 max cpu frequency\ub85c \uc124\uc815\ub429\ub2c8\ub2e4. conservative: \uc774\uac83\ub3c4 ondemand governor \ucc98\ub7fc CPU load\ub97c \uacc4\uc0b0\ud569\ub2c8\ub2e4. \uadf8\ub7ec\ub098 \uc774\uac83\uc740 threshold\ub97c \ub118\uc5c8\ub294\uc9c0 \uc548 \ub118\uc5c8\ub294\uc9c0\uc5d0 \ub530\ub77c \uc0c1\ub300\uc801\uc73c\ub85c \uc870\uae08\uc529 frequency\ub97c \ubcc0\ud654\uc2dc\ud0b5\ub2c8\ub2e4. [\ucd9c\ucc98] https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html","title":"Scaling governor"},{"location":"03_DVFS/03_02_dvfs_driver/#sysfs-command","text":"cpufreq \uad00\ub828 \uac00\ub2a5\ud55c sysfs \uc804\uccb4 # ls /sys/devices/system/cpu/cpu0/cpufreq/ affected_cpus related_cpus scaling_governor cpuinfo_cur_freq scaling_available_frequencies scaling_max_freq cpuinfo_max_freq scaling_available_governors scaling_min_freq cpuinfo_min_freq scaling_cur_freq scaling_setspeed cpuinfo_transition_latency scaling_driver stats currnet operating frequency \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_cur_freq 1150000 \uc124\uc815 \uac00\ub2a5\ud55c frequency \uac12\ub4e4 \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_available_frequencies 600000 900000 1150000 \uc124\uc815 \uac00\ub2a5\ud55c governor\ub4e4 \ud655\uc778 # cat /sys/devices/system/cpu/cpu4/cpufreq/scaling_available_governors ondemand userspace interactive performance governor \uc120\ud0dd # echo userspace > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor [\ucd9c\ucc98] https://www.digi.com/resources/documentation/digidocs/90001546/reference/bsp/v4-1_cc6/r_power_management.htm?TocPath=Digi%20Embedded%20Yocto%7CSystem%20development%7CLinux%20Board%20Support%20Package%7CDevices%20and%20interfaces%7C_____14 [\ucd9c\ucc98] https://community.arm.com/developer/tools-software/oss-platforms/w/docs/528/cpufreq-dvfs","title":"sysfs command"},{"location":"03_DVFS/03_02_dvfs_driver/#kernel-build-governor","text":"Default governor is \"performance\". The default governor can be changed through 'menuconfig'. Multiple governors can be built and exist in the kernel by selecting them through \"menuconfig\". Select the governors you want to build in to kernel. CPU Power management options ---> [*] CPU frequency scaling Default CPUFreq governor (performance) ---> [*] performance [*] userspace [*] ondemand [] conservative [\ucd9c\ucc98] DVFS (Dynamic Voltage and Frequency scaling) Disabler | \uc791\uc131\uc790 \uc5d0\ud504\ub7a8 EFRAM [\ucd9c\ucc98] https://wiki.somlabs.com/index.php/How_to_scale_CPU_frequency_with_DVFS_framework","title":"Kernel Build \uc2dc Governor \uc120\ud0dd"},{"location":"03_DVFS/03_02_dvfs_driver/#voltage-scaling","text":"The voltage layer consists of the information of all voltage domains in the system and configures all vdds during voltage layer initialization. When a vdd is configured a regulator supply handle is acquired and stored in the corresponding vdd structure.The regulators scale/set voltage function is plugged in to the vdd's voltage scale function pointer. Thus when a voltage change is requested forwarded to a vdd. The voltage layer requests the regulator framework to change the device voltage to the target voltage. Regluator driver verifies if the target voltage is in with in the limits of the voltage domain and regulator supply constraints. If all the checks go through then regulator changes the voltage of the requested device to the target voltage. [\ucd9c\ucc98] DVFS (Dynamic Voltage and Frequency scaling) Disabler | \uc791\uc131\uc790 \uc5d0\ud504\ub7a8 EFRAM","title":"Voltage Scaling"},{"location":"03_DVFS/03_02_dvfs_driver/#note","text":"Linux \uacf5\uc2dd\ubb38\uc11c\uc5d0\uc11c \ub098\uc624\ub294 CPU\ub77c\ub294 \uc6a9\uc5b4\ub294 logical CPU\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. processor \ub77c\ub294 \uc6a9\uc5b4\ub97c \uc0ac\uc6a9\ud560 \ub54c\ub9cc logical CPU\ub4e4\uc744 \ud3ec\ud568\ud558\ub294 \ubb3c\ub9ac\uc801\uc778 \uc758\ubbf8\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. logical CPU\ub294 processor \uc548\uc5d0 core\ub97c \uc758\ubbf8\ud558\uac70\ub098 hardware thread\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. Note that the logical CPU may be a physical single-core processor, or a single core in a multicore processor, or a hardware thread in a physical processor or processor core. In what follows \u201cCPU\u201d always means \u201clogical CPU\u201d unless explicitly stated otherwise and the word \u201cprocessor\u201d is used to refer to the physical part possibly including multiple logical CPUs. [\ucd9c\ucc98] https://www.kernel.org/doc/html/v4.14/admin-guide/pm/cpufreq.html","title":"Note"},{"location":"03_DVFS/03_02_dvfs_driver/#cf-devfreq","text":"","title":"cf) DEVFREQ"},{"location":"03_DVFS/03_02_dvfs_driver/#cf-pm-qos","text":"https://events.static.linuxfound.org/images/stories/pdf/lcjp2012_ham.pdf","title":"cf) PM QoS"},{"location":"06_S2R/06_01_System_Sleep_States/","text":"System Sleep States Linux kernel\uc5d0\uc11c\ub294 4\uac00\uc9c0\uc758 system sleep states\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. sleep states\ub294 low power states\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. Suspend-to-Idle Standby Suspend-to-RAM Hibernation https://www.kernel.org/doc/html/v4.14/admin-guide/pm/sleep-states.html cf) Working-State Power Management\ub294 DVFS \ucc55\ud130\uc5d0 \ud574\ub2f9\ud569\ub2c8\ub2e4.","title":"Supend To RAM"},{"location":"06_S2R/06_01_System_Sleep_States/#system-sleep-states","text":"Linux kernel\uc5d0\uc11c\ub294 4\uac00\uc9c0\uc758 system sleep states\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. sleep states\ub294 low power states\ub97c \uc758\ubbf8\ud569\ub2c8\ub2e4. Suspend-to-Idle Standby Suspend-to-RAM Hibernation https://www.kernel.org/doc/html/v4.14/admin-guide/pm/sleep-states.html cf) Working-State Power Management\ub294 DVFS \ucc55\ud130\uc5d0 \ud574\ub2f9\ud569\ub2c8\ub2e4.","title":"System Sleep States"}]}